{
  "Logging": {
    "LogLevel": {
      "Default": "Debug",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "COA.CodeSearch": "Debug",
      "COA.CodeSearch.Next": "Debug"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Debug",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning",
        "COA.CodeSearch": "Debug",
        "COA.CodeSearch.Next": "Debug"
      }
    }
  },
  "CodeSearch": {
    "BasePath": "~/.coa/codesearch",
    "LogsPath": "~/.coa/codesearch/logs",
    "HttpPort": 5020,
    "Federation": {
      "Enabled": true,
      "RequireApiKey": false,
      "ApiKey": null
    },
    "Lucene": {
      "IndexRootPath": "~/.coa/codesearch/indexes",
      "MaxIndexingConcurrency": 8,
      "MaxIndexingQueueSize": 100,
      "RAMBufferSizeMB": 256,
      "MaxBufferedDocs": 1000,
      "MergePolicy": {
        "Type": "TieredMergePolicy",
        "MaxMergeAtOnce": 10,
        "SegmentsPerTier": 10,
        "MaxMergedSegmentMB": 5120
      },
      "CommitInterval": "00:01:00",
      "MaxThreadStates": 8,
      "EagerReaderRefresh": true,
      "UseRamDirectory": false,
      "InactivityThresholdMinutes": 30,
      "MaxConcurrentIndexes": 10,
      "SupportedExtensions": [
        ".cs", ".js", ".ts", ".py", ".java", ".cpp", ".c", ".h", ".go", ".rs", ".rb", ".php", ".sql",
        ".html", ".css", ".json", ".xml", ".md", ".txt", ".yml", ".yaml", ".toml", ".ini",
        ".sh", ".bat", ".ps1", ".dockerfile", ".makefile", ".gradle", ".csproj", ".sln", ".config"
      ],
      "ExcludedDirectories": [
        "node_modules", ".git", "bin", "obj", "dist", "build", "target", ".vs", ".vscode",
        ".idea", "packages", ".nuget", "TestResults", ".codesearch", ".coa"
      ]
    },
    "FileWatcher": {
      "Enabled": true,
      "DebounceMilliseconds": 500,
      "DeleteQuietPeriodSeconds": 5,
      "AtomicWriteWindowMs": 100,
      "BatchSize": 50,
      "MaxWatchedWorkspaces": 20,
      "AutoIndexNewWorkspaces": true
    },
    "QueryCache": {
      "Enabled": true,
      "MaxCacheSize": 1000,
      "CacheDuration": "00:15:00"
    },
    "MemoryPressure": {
      "MaxMemoryMB": 500,
      "ThrottleThresholdPercent": 80,
      "GCThresholdPercent": 90,
      "MaxFileSize": 10485760,
      "LargeFileThreshold": 1048576,
      "MaxAllowedResults": 10000,
      "MaxMemoryContentLength": 100000,
      "MaxIndexingConcurrency": 8,
      "MaxIndexingQueueSize": 80,
      "MaxActiveIndexes": 100,
      "IdleIndexCleanupMinutes": 15,
      "MaxMemoryUsagePercent": 85,
      "MaxConcurrentBatches": 4,
      "MaxBatchSize": 500,
      "EnableMemoryPressureGC": true,
      "EnableBackpressure": true
    }
  },
  "McpServer": {
    "Name": "CodeSearch",
    "Version": "2.0.0",
    "TokenOptimization": {
      "DefaultTokenLimit": 5000,
      "SafetyMargin": 500,
      "EstimationAccuracyTarget": 0.95
    },
    "ResponseBuilding": {
      "EnableAIOptimization": true,
      "MinInsights": 3,
      "MaxInsights": 5,
      "IncludeUsageHints": true
    },
    "Caching": {
      "Enabled": true,
      "DefaultExpiration": "00:15:00",
      "MaxCacheSize": 100
    },
    "ServiceManager": {
      "Enabled": true,
      "AutoStart": true,
      "DefaultMode": "http",
      "HttpPort": 5020,
      "RestartOnFailure": true,
      "MaxRestartAttempts": 3
    }
  }
}